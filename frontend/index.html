<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#8b0000">
  <meta name="description" content="Soulpull ‚Äî –°–ø–∞—Å–µ–Ω–∏–µ –¥—É—à –∏–∑ –∞–¥–∞. –ü—Ä–∏–≥–ª–∞—Å–∏ 3 –¥—Ä—É–∑–µ–π, –ø–æ–ª—É—á–∏ 33 USDT.">
  <title>Soulpull ‚Äî –°–ø–∞—Å–µ–Ω–∏–µ –î—É—à</title>
  
  <!-- Styles -->
  <link rel="stylesheet" href="/static/css/styles.css">
  
  <!-- Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/tsparticles@2.12.0/tsparticles.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://unpkg.com/@tonconnect/ui@2.0.0/dist/tonconnect-ui.min.js"></script>
</head>
<body>
  <!-- Fire Particles Background -->
  <div id="particles-js"></div>

  <!-- Loading Overlay -->
  <div id="loading-overlay" class="loading-overlay">
    <div class="spinner" style="width: 48px; height: 48px; border-width: 4px;"></div>
    <div class="loading-text">–û—Ç–∫—Ä—ã–≤–∞–µ–º –≤—Ä–∞—Ç–∞...</div>
  </div>

  <div class="app">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <div class="logo-icon">üî•</div>
        <span class="logo-text">Soulpull</span>
      </div>
      <span class="version">‚öîÔ∏è MVP</span>
    </header>

    <!-- Banner: Not in Telegram -->
    <div id="banner-not-telegram" class="banner banner-warning hidden">
      ‚ö†Ô∏è –û—Ç–∫—Ä–æ–π—Ç–µ —á–µ—Ä–µ–∑ Telegram –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
    </div>

    <!-- ================================================================
         E1: –í–†–ê–¢–ê –ê–î–ê (Start Screen)
         ================================================================ -->
    <section id="screen-start" class="screen active">
      <div class="card">
        <div class="hero">
          <div class="hero-icon">üëª</div>
          <h1 class="hero-title">–°–ø–∞—Å–∏ —Å–≤–æ—é –¥—É—à—É</h1>
          <p class="hero-subtitle">
            –í—ã—Ä–≤–∏—Å—å –∏–∑ –ø–ª–∞–º–µ–Ω–∏ –∞–¥–∞! –ü—Ä–∏–≤–µ–¥–∏ 3 –¥—É—à–∏ ‚Äî –ø–æ–ª—É—á–∏ 33 USDT. 
            –¶–µ–Ω–∞ —Å–ø–∞—Å–µ–Ω–∏—è: 15 USDT.
          </p>
          <div class="hero-stats">
            <div class="hero-stat">
              <div class="hero-stat-value">15</div>
              <div class="hero-stat-label">USDT –≤—Ö–æ–¥</div>
            </div>
            <div class="hero-stat">
              <div class="hero-stat-value">33</div>
              <div class="hero-stat-label">USDT –Ω–∞–≥—Ä–∞–¥–∞</div>
            </div>
            <div class="hero-stat">
              <div class="hero-stat-value">3</div>
              <div class="hero-stat-label">–¥—É—à–∏</div>
            </div>
          </div>
        </div>
      </div>
      
      <button id="btn-start" class="btn btn-gold btn-lg">
        üö™ –í–æ–π—Ç–∏ –≤–æ –≤—Ä–∞—Ç–∞
      </button>
    </section>

    <!-- ================================================================
         E2: –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï –ö–û–®–ï–õ–¨–ö–ê (Wallet Screen)
         ================================================================ -->
    <section id="screen-wallet" class="screen">
      <div class="card">
        <h2 class="card-title">üîó –ü–æ–¥–∫–ª—é—á–∏ –∫–æ—à–µ–ª—ë–∫</h2>
        <p class="card-subtitle">
          –¢–≤–æ–π –∫–æ—à–µ–ª—ë–∫ ‚Äî —ç—Ç–æ –¥—É—à–∞ –≤ –±–ª–æ–∫—á–µ–π–Ω–µ. –ü–æ–¥–∫–ª—é—á–∏ TON –∫–æ—à–µ–ª—ë–∫ –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è.
        </p>
        
        <div id="ton-connect-button"></div>
        
        <div id="wallet-connected" class="wallet-info hidden">
          <div class="wallet-icon">üíé</div>
          <div class="wallet-details">
            <div class="wallet-label">–ö–æ—à–µ–ª—ë–∫ –ø–æ–¥–∫–ª—é—á—ë–Ω</div>
            <div class="wallet-address" id="wallet-address-display">‚Äî</div>
          </div>
        </div>
        
        <div id="wallet-status" class="banner banner-success hidden">
          ‚úÖ –î—É—à–∞ –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ –±–ª–æ–∫—á–µ–π–Ω—É
        </div>
      </div>
      
      <div class="nav-buttons">
        <button id="btn-wallet-next" class="btn btn-primary" disabled>
          –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø—É—Ç—å ‚Üí
        </button>
      </div>
    </section>

    <!-- ================================================================
         E3: –†–ï–§–ï–†–ï–† (Referral Screen)
         ================================================================ -->
    <section id="screen-referral" class="screen">
      <div class="card">
        <h2 class="card-title">üë§ –ö—Ç–æ —Ç–µ–±—è —Å–ø–∞—Å?</h2>
        <p class="card-subtitle">
          –£–∫–∞–∂–∏ Telegram ID —Ç–æ–≥–æ, –∫—Ç–æ –ø—Ä–∏–≤—ë–ª —Ç–µ–±—è –∫ –≤—Ä–∞—Ç–∞–º. 
          –ë–µ–∑ –ø—Ä–æ–≤–æ–¥–Ω–∏–∫–∞ ‚Äî –Ω–µ –≤–æ–π—Ç–∏.
        </p>
        
        <div class="form-group">
          <label class="form-label">Telegram ID –ø—Ä–æ–≤–æ–¥–Ω–∏–∫–∞</label>
          <input 
            type="text" 
            id="input-referrer" 
            class="form-input" 
            placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 123456789"
            inputmode="numeric"
            autocomplete="off"
          >
          <p class="form-hint">üí° –¢–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã. –ü—Ä–æ–≤–æ–¥–Ω–∏–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∂–µ —Å–ø–∞—Å—ë–Ω.</p>
        </div>
        
        <div id="referrer-error" class="banner banner-error hidden"></div>
        
        <div class="seed-user-block">
          <p class="seed-hint">üå± –ü–µ—Ä–≤—ã–π –≤ —Å–∏—Å—Ç–µ–º–µ? –ü—Ä–æ–≤–æ–¥–Ω–∏–∫–∞ –Ω–µ—Ç?</p>
          <button id="btn-referral-skip" class="btn btn-ghost">–Ø –ø–µ—Ä–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí</button>
        </div>
      </div>
      
      <div class="nav-buttons">
        <button id="btn-referral-back" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥</button>
        <button id="btn-referral-next" class="btn btn-primary">–î–∞–ª–µ–µ ‚Üí</button>
      </div>
    </section>

    <!-- ================================================================
         E4: –ö–û–î –ê–í–¢–û–†–ê (Author Code Screen)
         ================================================================ -->
    <section id="screen-author" class="screen">
      <div class="card">
        <h2 class="card-title">üìú –ö–æ–¥ –∞–≤—Ç–æ—Ä–∞</h2>
        <p class="card-subtitle">
          –ï—Å—Ç—å —Ç–∞–π–Ω—ã–π –∫–æ–¥? –í–≤–µ–¥–∏ –µ–≥–æ ‚Äî –ø–æ–ª—É—á–∏—à—å +10 –æ—á–∫–æ–≤ –∫ –∫–∞—Ä–º–µ. 
          –ú–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å.
        </p>
        
        <div class="form-group">
          <label class="form-label">–ö–æ–¥ –∞–≤—Ç–æ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
          <input 
            type="text" 
            id="input-author-code" 
            class="form-input" 
            placeholder="DARKCODE123"
            autocomplete="off"
          >
          <p class="form-hint">‚ú® –ê–≤—Ç–æ—Ä —Ç–æ–∂–µ –ø–æ–ª—É—á–∏—Ç +10 –æ—á–∫–æ–≤</p>
        </div>
      </div>
      
      <div class="nav-buttons">
        <button id="btn-author-back" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥</button>
        <button id="btn-author-next" class="btn btn-primary">–ö –æ–ø–ª–∞—Ç–µ ‚Üí</button>
      </div>
    </section>

    <!-- ================================================================
         E5: –û–ü–õ–ê–¢–ê (Payment Screen)
         ================================================================ -->
    <section id="screen-payment" class="screen">
      <div class="card">
        <h2 class="card-title">üí∞ –¶–µ–Ω–∞ —Å–ø–∞—Å–µ–Ω–∏—è</h2>
        <p class="card-subtitle">
          –û–ø–ª–∞—Ç–∏ 15 USDT ‚Äî –∏ —Ç–≤–æ—è –¥—É—à–∞ –Ω–∞—á–Ω—ë—Ç –ø—É—Ç—å –∫ —Å–≤–µ—Ç—É. 
          –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –°—Ç—Ä–∞–∂ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é.
        </p>
        
        <div id="payment-error" class="banner banner-error hidden"></div>
        
        <div class="payment-details" id="payment-details">
          <div class="payment-amount">15 USDT</div>
          <div class="payment-row">
            <span class="payment-label">–ü–æ–ª—É—á–∞—Ç–µ–ª—å</span>
            <span class="payment-value" id="payment-receiver">‚Äî</span>
          </div>
          <div class="payment-row">
            <span class="payment-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</span>
            <span class="payment-value" id="payment-comment">‚Äî</span>
          </div>
          <div class="payment-row" id="payment-intent-row" style="display: none;">
            <span class="payment-label">Intent ID</span>
            <span class="payment-value" id="payment-intent-id">‚Äî</span>
          </div>
        </div>
        
        <button id="btn-pay-create" class="btn btn-gold btn-lg mb-4">
          üî• –°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç—ë–∂
        </button>
        
        <button id="btn-pay-send" class="btn btn-success btn-lg hidden">
          üí≥ –û–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ –∫–æ—à–µ–ª—ë–∫
        </button>
        
        <div id="payment-pending" class="banner banner-info hidden">
          ‚è≥ –û–∂–∏–¥–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç –°—Ç—Ä–∞–∂–∞...
        </div>
      </div>
      
      <div class="nav-buttons">
        <button id="btn-payment-back" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥</button>
        <button id="btn-payment-done" class="btn btn-primary" disabled>
          –ì–æ—Ç–æ–≤–æ ‚Üí
        </button>
      </div>
    </section>

    <!-- ================================================================
         E6: –ü–†–û–ì–†–ï–°–° (Progress Screen)
         ================================================================ -->
    <section id="screen-progress" class="screen">
      <div class="card">
        <h2 class="card-title">üèÜ –¢–≤–æ–π –ø—É—Ç—å –∫ —Å–ø–∞—Å–µ–Ω–∏—é</h2>
        
        <div class="text-center mb-4">
          <span id="participation-status" class="status-badge new">NEW</span>
        </div>
        
        <div class="progress-counter">
          <div class="progress-number"><span id="l1-count">0</span>/3</div>
          <div class="progress-label">—Å–ø–∞—Å—ë–Ω–Ω—ã—Ö –¥—É—à</div>
        </div>
        
        <ul class="checklist">
          <li class="checklist-item">
            <span id="check-paid" class="checklist-icon pending">‚óã</span>
            <span class="checklist-text">–û–ø–ª–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞</span>
          </li>
          <li class="checklist-item">
            <span id="check-l1" class="checklist-icon pending">‚óã</span>
            <span class="checklist-text">3 –¥—É—à–∏ –æ–ø–ª–∞—Ç–∏–ª–∏ –≤—Ö–æ–¥</span>
          </li>
          <li class="checklist-item">
            <span id="check-payout" class="checklist-icon pending">‚óã</span>
            <span class="checklist-text">–ù–∞–≥—Ä–∞–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞</span>
          </li>
        </ul>
      </div>
      
      <div class="card">
        <h3 class="card-title" style="font-size: 18px;">üìã –¢–≤–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è</h3>
        
        <button id="btn-copy-link" class="btn btn-outline mb-2">
          üîó –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
        </button>
        
        <button id="btn-tree" class="btn btn-secondary mb-2">
          üå≥ –î–µ—Ä–µ–≤–æ –¥—É—à L1
        </button>
        
        <button id="btn-payout" class="btn btn-gold" disabled>
          üí∞ –ó–∞–±—Ä–∞—Ç—å 33 USDT
        </button>
      </div>
      
      <div class="nav-buttons">
        <button id="btn-strazh" class="btn btn-secondary">
          üõ°Ô∏è –°—Ç—Ä–∞–∂
        </button>
        <button id="btn-refresh" class="btn btn-primary">
          üîÑ –û–±–Ω–æ–≤–∏—Ç—å
        </button>
      </div>
    </section>

    <!-- ================================================================
         E7: –î–ï–†–ï–í–û –î–£–®L1 (Tree Screen)
         ================================================================ -->
    <section id="screen-tree" class="screen">
      <div class="card">
        <h2 class="card-title">üå≥ –î–µ—Ä–µ–≤–æ —Ç–≤–æ–∏—Ö –¥—É—à</h2>
        <p class="card-subtitle">
          –°–ª–æ—Ç—ã: <span id="slots-used" class="text-fire">0</span>/3 –∑–∞–Ω—è—Ç—ã
        </p>
        
        <ul id="referral-list" class="referral-list">
          <!-- Dynamic content -->
        </ul>
        
        <div id="tree-empty" class="text-center text-muted mt-4">
          <p style="font-size: 48px; margin-bottom: 12px;">üëª</p>
          <p>–ü–æ–∫–∞ –Ω–∏–∫–æ–≥–æ –Ω–µ—Ç. –ü—Ä–∏–≤–µ–¥–∏ –¥—É—à–∏!</p>
        </div>
      </div>
      
      <div class="nav-buttons">
        <button id="btn-tree-back" class="btn btn-primary">
          ‚Üê –ù–∞–∑–∞–¥ –∫ –ø—Ä–æ–≥—Ä–µ—Å—Å—É
        </button>
      </div>
    </section>

    <!-- ================================================================
         E8: –°–¢–†–ê–ñ (Admin Panel)
         ================================================================ -->
    <section id="screen-strazh" class="screen">
      <div class="card">
        <h2 class="card-title">üõ°Ô∏è –°—Ç—Ä–∞–∂</h2>
        <p class="card-subtitle">–ü–∞–Ω–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–µ–π (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤)</p>
        
        <div id="strazh-login">
          <div class="form-group">
            <label class="form-label">–¢–æ–∫–µ–Ω –°—Ç—Ä–∞–∂–∞</label>
            <input 
              type="password" 
              id="input-admin-token" 
              class="form-input" 
              placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π —Ç–æ–∫–µ–Ω"
            >
          </div>
          <button id="btn-admin-login" class="btn btn-primary">
            üîì –í–æ–π—Ç–∏ –∫–∞–∫ –°—Ç—Ä–∞–∂
          </button>
        </div>
        
        <div id="strazh-panel" class="hidden">
          <div class="admin-section">
            <h3 class="admin-section-title">–û–∂–∏–¥–∞—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</h3>
            <div id="pending-list">
              <p class="text-muted">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
            </div>
          </div>
          
          <div class="divider"></div>
          
          <div class="admin-section">
            <h3 class="admin-section-title">–ó–∞—è–≤–∫–∏ –Ω–∞ –≤—ã–ø–ª–∞—Ç—É</h3>
            <div id="payout-list">
              <p class="text-muted">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
            </div>
          </div>
        </div>
      </div>
      
      <div class="nav-buttons">
        <button id="btn-strazh-back" class="btn btn-secondary">
          ‚Üê –ù–∞–∑–∞–¥
        </button>
      </div>
    </section>

    <!-- Toast -->
    <div id="toast" class="toast"></div>
  </div>

  <!-- Main App Script -->
  <script src="/static/js/app.js"></script>
</body>
</html>
